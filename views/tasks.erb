<% if @clear  %>
  <input class="nes-input form-error" id="task-form" hx-swap-oob="true" name="task" type="text" placeholder="new task">
<% end %>



<ul class="nes-list is-disc">

  <% if @error %>
    <p class="alert"> Please enter a task </p>
  <% end %>

<% @tasks.all.each_with_index do |task, index| %>

<% if task.done? %>

  <li class='icon-list'>
    <p class="nes-text is-disabled"> <%= task.description %>
      <span hx-post=<%= "tasks/#{index}"%>
            hx-target=".nes-list"
            hx-swap="outerHTML"
            class="nes-text is-warning"
            hx-include=<%= "[name=_method][data-delete='#{index}']" %>>
        delete
      </span>
    </p>
      <input type="hidden" name="_method" value="delete" data-delete=<%= "#{index}" %>>
    </li>


  <% else %>
  <li>
    <p> <%= task.description %>
      <a
        class="nes-btn"
        hx-post=<%= "tasks/#{index}"%>
        hx-target=".nes-list"
        hx-swap="outerHTML"
        hx-include=<%="[name=_method][data-mark='#{index}']"%>> mark as done
      </a>
      <input type="hidden" name="_method" value="patch" data-mark=<%="#{index}" %>>
    </p>
  </li>
  <% end %>
  <% end %>
</ul>



